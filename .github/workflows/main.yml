# .github/workflows/2048-ai-optimized.yml
name: 2048 AI Optimized Benchmark

on: [push, pull_request, schedule]

jobs:
  benchmark:
    runs-on: ubuntu-latest
    strategy:
      matrix:
        run-type: [benchmark, quick-test]
    
    steps:
    - name: ğŸš€ Checkout code
      uses: actions/checkout@v4
      
    - name: ğŸ› ï¸ Setup environment
      run: |
        sudo apt-get update
        sudo apt-get install -y g++-11
        echo "CXX=g++-11" >> $GITHUB_ENV
        
    - name: ğŸ”¨ Build optimized AI
      run: |
        g++ -O3 -std=c++17 -pthread -march=native -flto -DNDEBUG \
            -o 2048_ai optimized_2048_ai.cpp
            
    - name: ğŸ“Š Run Benchmark
      run: |
        echo "ğŸ§ª å¼€å§‹AIæ€§èƒ½æµ‹è¯•..."
        timeout 300 ./2048_ai || echo "â° æµ‹è¯•å®Œæˆ"
        
        echo "ğŸ“ˆ æ€§èƒ½æŠ¥å‘Š:"
        echo "ç³»ç»Ÿ: Ubuntu Latest"
        echo "CPU: $(nproc) æ ¸å¿ƒ"
        echo "ä¼˜åŒ–çº§åˆ«: -O3 + æ¶æ„ç‰¹å®šä¼˜åŒ–"
